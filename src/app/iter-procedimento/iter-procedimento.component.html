
<div class="headerDiv">
  <h3><span class="header-font">Azienda:</span> <i>{{infoGeneriche.azienda}}</i></h3>
  <h3><span class="header-font">Struttura:</span> <i>{{infoGeneriche.struttura}}</i></h3>
  <h3><span class="header-font">Tipo procedimento:</span> <i>{{infoGeneriche.tipoProcedimento}}</i></h3>
  <h3><span class="header-font">Iter N. </span> <i>{{infoGeneriche.numeroIter}}</i></h3>
  <div><dx-button [text]="'Link'" (onClick)="passaggioDiFase()"></dx-button></div>
</div>
<dx-responsive-box class="contentWrapper">
  <dxi-row [ratio]="1"></dxi-row>

  <dxi-col [ratio]="1"></dxi-col>
  <dxi-col [ratio]="1"></dxi-col>

  <dxi-item>
    <dxi-location [row]="0" [col]="0" [colspan]="1" screen="lg"></dxi-location>
    <dxi-location [row]="0" [col]="0" [colspan]="1" screen="md"></dxi-location>
    <dxi-location [row]="0" [col]="0" [colspan]="1" screen="sm"></dxi-location>
    <dxi-location [row]="0" [col]="0" [colspan]="1" screen="xs"></dxi-location>
    <div class="boxes">
      <dx-form 
        id="form"
        [colCount]="1"
        [formData]="iter">
        <dxi-item itemType="group" [colCount]="2">
          <dxi-item [colSpan]="2" dataField="oggetto" [editorOptions]="{ disabled: true }"></dxi-item>

          <dxi-item [colSpan]="2" dataField="idResponsabileProcedimento.nome" [editorOptions]="{ disabled: true }">
              <dxo-label text="Resp. procedimento"></dxo-label>
          </dxi-item>

          <dxi-item [colSpan]="2" dataField="procedimentoCache.idTitolarePotereSostitutivo.descrizione" [editorOptions]="{ disabled: true }">
              <dxo-label text="Tit. potere sostitutivo"></dxo-label>
          </dxi-item>

          <dxi-item [colSpan]="2" dataField="promotore" [editorOptions]="{ disabled: true }"></dxi-item>

          <dxi-item [colSpan]="1" dataField="presenzaControinteressati" editorType="dxCheckBox" [editorOptions]="{ disabled: true}">
              <dxo-label text="Controinteressati"></dxo-label>
          </dxi-item>

          <dxi-item [colSpan]="1">
              <dx-button text="Note controinteressati" type="default" (onClick)="updateNoteControInteressati()"></dx-button>
          </dxi-item>

          <dxi-item [colSpan]="2" dataField="idFase.nomeFase" [editorOptions]="{ disabled: true }">
              <dxo-label text="Fase corrente"></dxo-label>
          </dxi-item>

          <dxi-item [colSpan]="2" dataField="stato" [editorOptions]="{ disabled: true }"></dxi-item>

          <dxi-item [colSpan]="1" dataField="esito" [editorOptions]="{ disabled: true }"></dxi-item>

          <dxi-item [colSpan]="1">
              <dx-button text="Motivazione" type="default" (onClick)="updateEsitoMotivazione()"></dx-button>
          </dxi-item>
        </dxi-item>

        <dxi-item itemType="group" caption="Dati temporali">
          <dxi-item dataField="dataAvvio" editorType="dxDateBox" [editorOptions]="{ disabled: true }"></dxi-item>

          <dxi-item dataField="dataChiusuraPrevista" editorType="dxDateBox" [editorOptions]="{ disabled: true }">
              <dxo-label text="Data chiusura prevista"></dxo-label>
          </dxi-item>

          <dxi-item dataField="dataChiusura" editorType="dxDateBox" [editorOptions]="{ disabled: true }"></dxi-item>

          <dxi-item dataField="derogaSospensione" [editorOptions]="{ disabled: true }"></dxi-item>

          <dxi-item dataField="Durata dell'iter" [editorOptions]="{ disabled: true }"></dxi-item>
        </dxi-item>

        <dxi-item itemType="group" caption="Dati di archivio">
          <dxi-item dataField="idIterPrecedente.numeroIter" [editorOptions]="{ disabled: true }">
              <dxo-label text="Coll. precedente"></dxo-label>
          </dxi-item>
          <dxi-item dataField="modalitaCollegamentoPrecedente" [editorOptions]="{ disabled: true }">
              <dxo-label text="Motivo collegamento"></dxo-label>
          </dxi-item>
          <dxi-item dataField="idFascicolo" [editorOptions]="{ disabled: true }">
              <dxo-label text="Fascicolo dell'iter"></dxo-label>
          </dxi-item>
          <dxi-item dataField="Classificazione" [editorOptions]="{ disabled: true }"></dxi-item>
        </dxi-item>
      </dx-form> 
    </div>
  </dxi-item>

  <dxi-item>
    <dxi-location [row]="0" [col]="1" [colspan]="1" screen="lg"></dxi-location>
    <dxi-location [row]="0" [col]="1" [colspan]="1" screen="md"></dxi-location>
    <dxi-location [row]="0" [col]="1" [colspan]="1" screen="sm"></dxi-location>
    <dxi-location [row]="0" [col]="1" [colspan]="1" screen="xs"></dxi-location>
    <div class="boxes">
      <app-sequenza-delle-fasi [idIter]="idIter"></app-sequenza-delle-fasi>
      <app-cronologia-eventi [idIter]="idIter"></app-cronologia-eventi>
      <documenti-iter [idIter]="idIter"></documenti-iter>
    </div>
  </dxi-item>
</dx-responsive-box>

<div class="footerDiv">
    <dx-button [text]="'Annulla'" [type]="'normal'"></dx-button>
    <dx-button [text]="'Conferma'" [type]="'normal'"></dx-button>
</div>

<dx-popup
  class="popup"
  [width]="500"
  [height]="300"
  [showTitle]="true"
  [title]="popupData.title"
  [dragEnabled]="false"
  [closeOnOutsideClick]="true"
  [(visible)]="popupData.visible">
  <div *dxTemplate="let data of 'content'">
      <dx-text-area
        [height]="150"
        [(value)]="popupData.fieldValue">
      </dx-text-area>
      <div class="wrapperPulsantiPopup">
          <dx-button text="Annulla" type="normal"></dx-button>
          <dx-button text="Salva" type="default"></dx-button>
      </div> 
  </div>
</dx-popup>


<dx-popup
    class="popup"
    [width]="700"
    [height]="700"
    [showTitle]="true"
    [title]="popupData.title"
    [dragEnabled]="false"
    [closeOnOutsideClick]="true"
    [(visible)]="passaggioDiFaseVisible">
    <div *dxTemplate="let data of 'content'">
        <app-passaggio-di-fase [idIter]="idIter" (messageEvent)="receiveMessage($event)"></app-passaggio-di-fase>
    </div>
</dx-popup>>